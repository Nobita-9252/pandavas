<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Pandavas 3D Game</title>
<style>
body { margin:0; overflow:hidden; }
#ui {
  position:fixed;
  top:10px;
  left:10px;
  color:white;
  font-family:Arial;
  background:rgba(0,0,0,0.5);
  padding:10px;
}
</style>
</head>
<body>

<div id="ui">
  <b>Pandava:</b> Arjun<br>
  W A S D → Move<br>
  SPACE → Attack
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.155/build/three.min.js"></script>

<script>
// SCENE
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);

// CAMERA
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0,6,8);

// RENDERER
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// LIGHT
const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(5,10,5);
scene.add(light);

// GROUND (Kurukshetra)
const ground = new THREE.Mesh(
  new THREE.PlaneGeometry(50,50),
  new THREE.MeshStandardMaterial({color:0x228B22})
);
ground.rotation.x = -Math.PI/2;
scene.add(ground);

// PLAYER (Pandava - Arjun)
const player = new THREE.Mesh(
  new THREE.BoxGeometry(1,2,1),
  new THREE.MeshStandardMaterial({color:0xffcc99})
);
player.position.y = 1;
scene.add(player);

// ENEMY (Kaurava AI)
const enemy = new THREE.Mesh(
  new THREE.BoxGeometry(1,2,1),
  new THREE.MeshStandardMaterial({color:0x8b0000})
);
enemy.position.set(5,1,0);
scene.add(enemy);

let enemyHealth = 100;

// CONTROLS
const keys = {};
window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

// ATTACK
function attack() {
  const dist = player.position.distanceTo(enemy.position);
  if(dist < 2 && enemyHealth > 0){
    enemyHealth -= 20;
    enemy.material.color.set(0xff0000);
    setTimeout(()=>enemy.material.color.set(0x8b0000),200);
    if(enemyHealth <= 0){
      scene.remove(enemy);
      alert("Enemy Defeated!");
    }
  }
}

// GAME LOOP
function animate(){
  requestAnimationFrame(animate);

  if(keys["w"]) player.position.z -= 0.1;
  if(keys["s"]) player.position.z += 0.1;
  if(keys["a"]) player.position.x -= 0.1;
  if(keys["d"]) player.position.x += 0.1;

  if(keys[" "]){
    keys[" "] = false;
    attack();
  }

  // Enemy AI follow
  if(enemyHealth > 0){
    enemy.position.x += (player.position.x - enemy.position.x) * 0.01;
    enemy.position.z += (player.position.z - enemy.position.z) * 0.01;
  }

  camera.lookAt(player.position);
  renderer.render(scene,camera);
}

animate();
</script>

</body>
</html>
